{"ast":null,"code":"var _jsxFileName = \"/home/honey/Desktop/Frontend/ManagementPortal-FE/src/views/layout/Layout.view.js\";\nimport { get } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport React, { Fragment, useEffect } from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport AppRoutes from '../../AppRoutes';\nimport { getUser } from '../auth/auth.api';\nimport storage from '../../common/storage';\nimport { AUTH_ROUTES } from '../../common/constants';\n\nconst Layout = ({\n  history,\n  location,\n  getUser,\n  isAuthenticated\n}) => {\n  useEffect(() => {\n    if (isAuthenticated && location && location.pathname) {\n      console.log('isAuthenticated', isAuthenticated);\n      console.log('location', location);\n      console.log('location.pathname', location.pathname);\n      history.push(AUTH_ROUTES.includes(location.pathname) ? '/dashboard' : location.pathname);\n    } else if (!isAuthenticated && get(storage.get('user'), 'token')) {\n      // eslint-disable-next-line no-unused-expressions\n      getUser;\n    }\n  }, [getUser, history, isAuthenticated, location]);\n  return [React.createElement(Fragment, {\n    key: \"redirect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, isAuthenticated && React.createElement(Redirect, {\n    to: AUTH_ROUTES.includes(location.pathname) ? '/dashboard' : location.pathname,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    key: \"app\",\n    id: \"app-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(AppRoutes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }))];\n};\n\nLayout.defaultProps = {\n  isAuthenticated: false\n};\nLayout.propTypes = {\n  isAuthenticated: PropTypes.bool,\n  getUser: PropTypes.func,\n  history: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.getIn(['auth', 'isAuthenticated'])\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getUser: () => {\n    dispatch(getUser());\n  }\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Layout));","map":{"version":3,"sources":["/home/honey/Desktop/Frontend/ManagementPortal-FE/src/views/layout/Layout.view.js"],"names":["get","PropTypes","connect","React","Fragment","useEffect","withRouter","Redirect","AppRoutes","getUser","storage","AUTH_ROUTES","Layout","history","location","isAuthenticated","pathname","console","log","push","includes","defaultProps","propTypes","bool","func","object","isRequired","mapStateToProps","state","getIn","mapDispatchToProps","dispatch"],"mappings":";AAAA,SAASA,GAAT,QAAoB,QAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,kBAArC;AAEA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,SAASC,WAAT,QAA4B,wBAA5B;;AAEA,MAAMC,MAAM,GAAG,CAAC;AACdC,EAAAA,OADc;AAEdC,EAAAA,QAFc;AAGdL,EAAAA,OAHc;AAIdM,EAAAA;AAJc,CAAD,KAKT;AACJV,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIU,eAAe,IAAID,QAAnB,IAA+BA,QAAQ,CAACE,QAA5C,EAAsD;AACpDC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,eAA/B;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBJ,QAAxB;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCJ,QAAQ,CAACE,QAA1C;AACAH,MAAAA,OAAO,CAACM,IAAR,CACER,WAAW,CAACS,QAAZ,CAAqBN,QAAQ,CAACE,QAA9B,IACI,YADJ,GAEIF,QAAQ,CAACE,QAHf;AAKD,KATD,MASO,IAAI,CAACD,eAAD,IAAoBf,GAAG,CAACU,OAAO,CAACV,GAAR,CAAY,MAAZ,CAAD,EAAsB,OAAtB,CAA3B,EAA2D;AAChE;AACAS,MAAAA,OAAO;AACR;AACF,GAdQ,EAcN,CAACA,OAAD,EAAUI,OAAV,EAAmBE,eAAnB,EAAoCD,QAApC,CAdM,CAAT;AAgBA,SAAO,CACL,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,eAAe,IACd,oBAAC,QAAD;AACE,IAAA,EAAE,EACAJ,WAAW,CAACS,QAAZ,CAAqBN,QAAQ,CAACE,QAA9B,IACI,YADJ,GAEIF,QAAQ,CAACE,QAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADK,EAYL;AAAK,IAAA,GAAG,EAAC,KAAT;AAAe,IAAA,EAAE,EAAC,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAZK,CAAP;AAgBD,CAtCD;;AAwCAJ,MAAM,CAACS,YAAP,GAAsB;AACpBN,EAAAA,eAAe,EAAE;AADG,CAAtB;AAIAH,MAAM,CAACU,SAAP,GAAmB;AACjBP,EAAAA,eAAe,EAAEd,SAAS,CAACsB,IADV;AAEjBd,EAAAA,OAAO,EAAER,SAAS,CAACuB,IAFF;AAGjBX,EAAAA,OAAO,EAAEZ,SAAS,CAACwB,MAAV,CAAiBC,UAHT;AAIjBZ,EAAAA,QAAQ,EAAEb,SAAS,CAACwB,MAAV,CAAiBC;AAJV,CAAnB;;AAOA,MAAMC,eAAe,GAAIC,KAAD,KAAY;AAClCb,EAAAA,eAAe,EAAEa,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,iBAAT,CAAZ;AADiB,CAAZ,CAAxB;;AAIA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACxCtB,EAAAA,OAAO,EAAE,MAAM;AACbsB,IAAAA,QAAQ,CAACtB,OAAO,EAAR,CAAR;AACD;AAHuC,CAAf,CAA3B;;AAMA,eAAeH,UAAU,CAACJ,OAAO,CAACyB,eAAD,EAAkBG,kBAAlB,CAAP,CAA6ClB,MAA7C,CAAD,CAAzB","sourcesContent":["import { get } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport React, { Fragment, useEffect } from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\n\nimport AppRoutes from '../../AppRoutes';\nimport { getUser } from '../auth/auth.api';\nimport storage from '../../common/storage';\nimport { AUTH_ROUTES } from '../../common/constants';\n\nconst Layout = ({\n  history,\n  location,\n  getUser,\n  isAuthenticated,\n}) => {\n  useEffect(() => {\n    if (isAuthenticated && location && location.pathname) {\n      console.log('isAuthenticated', isAuthenticated)\n      console.log('location', location)\n      console.log('location.pathname', location.pathname)\n      history.push(\n        AUTH_ROUTES.includes(location.pathname)\n          ? '/dashboard'\n          : location.pathname,\n      );\n    } else if (!isAuthenticated && get(storage.get('user'), 'token')) {\n      // eslint-disable-next-line no-unused-expressions\n      getUser\n    }\n  }, [getUser, history, isAuthenticated, location]);\n\n  return [\n    <Fragment key=\"redirect\">\n      {isAuthenticated && (\n        <Redirect\n          to={\n            AUTH_ROUTES.includes(location.pathname)\n              ? '/dashboard'\n              : location.pathname\n          }\n        />\n      )}\n    </Fragment>,\n    <div key=\"app\" id=\"app-wrapper\">\n      <AppRoutes />\n    </div>,\n  ];\n};\n\nLayout.defaultProps = {\n  isAuthenticated: false,\n};\n\nLayout.propTypes = {\n  isAuthenticated: PropTypes.bool,\n  getUser: PropTypes.func,\n  history: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  isAuthenticated: state.getIn(['auth', 'isAuthenticated']),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  getUser: () => {\n    dispatch(getUser());\n  },\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Layout));\n"]},"metadata":{},"sourceType":"module"}